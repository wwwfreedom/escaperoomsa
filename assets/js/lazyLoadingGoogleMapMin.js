/*
  By Osvaldas Valutis, www.osvaldas.info
  Available for use under the MIT License
*/

;window.googleMapsScriptLoaded=function(){$(window).trigger("googleMapsScriptLoaded")};(function(e,t,n,r){"use strict";var i=e(t),s=e("body"),o=i.height(),u=0,a=function(e,t){var n=null;return function(){var r=this,i=arguments;clearTimeout(n);n=setTimeout(function(){t.apply(r,i)},e)}},f=function(e,t){var n,r;return function(){var i=this,s=arguments,o=+(new Date);if(n&&o<n+e){clearTimeout(r);r=setTimeout(function(){n=o;t.apply(i,s)},e)}else{n=o;t.apply(i,s)}}},l=false,c=false,h=e([]),p=function(t){u=i.scrollTop();h.each(function(){var t=e(this),n=t.data("options");if(t.offset().top-u>o*1)return true;if(!l&&!c){s.append('<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=googleMapsScriptLoaded'+(n.api_key?"&key="+n.api_key:"")+'"></script>');c=true}if(!l)return true;var r=new google.maps.Map(this,{zoom:15});if(n.callback!==false)n.callback(this,r);h=h.not(t)})};i.on("googleMapsScriptLoaded",function(){l=true;p()}).on("scroll",f(500,p)).on("resize",a(1e3,function(){o=i.height();p()}));e.fn.lazyLoadGoogleMaps=function(t){t=e.extend({api_key:false,callback:false},t);this.each(function(){var n=e(this);n.data("options",t);h=h.add(n)});p();this.debounce=a;this.throttle=f;return this}})(jQuery,window,document);